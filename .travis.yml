sudo: false
language: python
branches:
    only:
    - v0.0.6
matrix:
    include:
#    - os: osx
#      language: generic
#      env: TOXENV=py36
    - python: "2.7"
      env: TOXENV=py27
    - python: "3.6"
      env: TOXENV=py36
    - python: "3.5"
      env: TOXENV=py35
    - python: "3.4"
      env: TOXENV=py34
    - python: "3.3"
      env: TOXENV=py33
    - python: "2.6"
      env: TOXENV=py26
    - python: "nightly"
      env: TOXENV=nightly
    - python: "pypy"
      env: TOXENV=pypy
    - python: "pypy3"
      env: TOXENV=pypy3
    - python: "2.7"
      env: TOXENV=checkers
    allow_failures:
    - env: TOXENV=nightly
    - env: TOXENV=py26
    - env: TOXENV=py33
    - env: TOXENV=py34
    - env: TOXENV=pypy
    - env: TOXENV=pypy3
    - env: TOXENV=checkers
install:
- if [[ $TRAVIS_OS_NAME == 'osx' ]]; then brew install python3; fi
- if [[ $TRAVIS_OS_NAME == 'osx' ]]; then pip3 install tox; fi
- if [[ $TRAVIS_OS_NAME == 'osx' ]]; then pip3 install -r requirements.txt; fi
- if [[ $TRAVIS_OS_NAME == 'linux' ]]; then pip install tox; fi
- if [[ $TRAVIS_OS_NAME == 'linux' ]]; then pip install -r requirements.txt; fi
- if [[ $TOXENV == 'checkers' ]]; then pip install -r requirements.txt; fi
- if [[ $TOXENV == 'checkers' ]]; then pip install flake8; fi
- if [[ $TOXENV == 'checkers' ]]; then pip install pep8-naming; fi
- if [[ $TOXENV == 'py27' ]]; then pip install coveralls; fi
- if [[ $TRAVIS_PULL_REQUEST != 'false' ]]; then pip install yapf; fi
script:
- if [[ $TRAVIS_PULL_REQUEST != 'false' ]] && [[ $TOXENV == 'checkers' ]]; then yapf -i isbnlib_porbase; fi
- if [[ ! -z $TOXENV ]]; then tox -e $TOXENV; fi
after_success:
- if [[ $TOXENV == 'py27' ]]; then coveralls; fi
notifications:
  email: false
